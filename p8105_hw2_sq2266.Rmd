---
title: "p8105_hw2_sq2266"
output: github_document
---


## create a subdirectory to store the local data files, and use relative paths to access these data files?

```{r setup}
library(tidyverse)
library(readxl)
```

## Problem 1


```{r}
transit_df = read_csv("NYC_Transit_Subway_Entrance_And_Exit_Data.csv")
transit_df = janitor::clean_names(transit_df)
print(transit_df)
```

```{r}
    select(transit_df,line,station_name, station_latitude, route1,route2,route3,route4,route5,route6,route7,route8,route9,route10, entry, vending, entrance_type, ada) |>

print(transit_df)
```

```{r}
    transit_df = transit_df |>
    mutate(
      entry = ifelse("entry" == "YES",TRUE,FALSE)
    ) 
print(transit_df)

```

Description: 
This dataset includes information of subway stations in New York City. Key variables includes `division`,`line`, `station_name`, `station_latitude`,`station_longitude`,`routes`, `entry`,`vending`,`entrance_type`, and `ada`. The data cleaning steps includes standardizing column names by using `janitor::clean_names` to make uppercase and lowercase separated, converting `entry` from a character variable to a logical variable. 

```{r}
transit_df = transit_df |>
      distinct("station_name", "line") |>
  nrow()
```

```{r}
ada_compliant_stations = transit_df |>
  filter(ada == "YES") |>
  distinct(station_name, line) |>
  nrow()
```

```{r}
entrance_df= transit_df |>
  filter(vending == "NO") |>
  pull(proportion)

print(entrance_df)
```


## Problem 2
clean and read data
```{r}
wheel1_df = 
  read_excel("202309 Trash Wheel Collection Data.xlsx", sheet = 1, na = c("NA",".","")) |>
  janitor::clean_names() |>
  filter(homes_powered !=0.00) |>
  select(-x15, -x16) |>
  mutate(sports_balls = as.integer(round(sports_balls,0))) |>
  pivot_longer(
    cols = plastic_bottles:homes_powered,
    names_to = "trash_type",
    values_to = "amount"
  )
  print(wheel1_df)
```


## importing Professor Trash Wheel and Gwynnda
```{r}
wheel2_df = 
  read_excel("202309 Trash Wheel Collection Data.xlsx", sheet = 2, na = c("NA",".","")) |>
  janitor::clean_names() |>
   pivot_longer(
    cols = plastic_bottles:homes_powered,
    names_to = "trash_type",
    values_to = "amount"
  )
print(wheel2_df)
```

```{r}
wheel4_df = 
  read_excel("202309 Trash Wheel Collection Data.xlsx", sheet = 4,na = c("NA",".","")) |>
  janitor::clean_names() |>
   pivot_longer(
    cols = plastic_bottles:homes_powered,
    names_to = "trash_type",
    values_to = "amount"
  )
print(wheel4_df)
```

## Combining
```{r}
total_trash_df = 
     left_join(wheel1_df,wheel2_df,wheel4_df, by = "dumpster")

```


```{r}
Description:
  

```



## Problem 3
create a single, well-organized dataset with all the information contained in these data files
```{r}
bakers_df = 
  read_csv("gbb_datasets/bakers.csv", na = c("NA",".",""))|>
  janitor::clean_names()|>
  rename(baker = baker_name)
print(bakers_df)
```

```{r}
bakes_df = 
  read_csv("gbb_datasets/bakes.csv",na = c("NA",".",""))
  janitor::clean_names()
print(bakes_df)
```


```{r}
results_df = 
  read_csv("gbb_datasets/results.csv",na = c("NA",".","")) |>
  janitor::clean_names() |>
  rename(
    result = in_stayed_in_out_eliminated_star_baker_star_baker_winner_series_winner_runner_up_series_runner_up_wd_withdrew
    
  )
  
print(results_df)
```

## combining datasets
```{r}
bakers_bakes_df = 
  left_join(bakers_df, bakes_df, by = "baker")
print(bakers_bakes_df)
```

```{r}
merged_df = 
  left_join(bakers_bakes_df, results_df, by = "baker") |>
  arrange(series) |>
  relocate(series)
print(merged_df)
```


